<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <title><%= title %></title>
</head>
<body>
    <h1 class="title">Todolist App</h1>
    <div class="container">
        <!-- <form action="/todo" method="POST"> -->
        <form>
            <h2 class="title-list">My list</h2>
            <div class="add-todo">
                <input type="text" class="input-add" id="input-add" placeholder="add todo">
                <button class="btn-add" id="btn-add">+</button>
            </div>
            <div class="todolist">
                <ul>
                    <% let i = 0;
                        todoList.forEach((item) => {
                            let deadLine = item.deadLine;
                            deadLine.setHours(deadLine.getHours() - deadLine.getTimezoneOffset() / 60);
                            deadLine = deadLine.toISOString().slice(0,16);
                    %>
                            
                        <li>
                            <input type="checkbox" id="<%= i %>" class="item" <% if (item.done){ %> checked <% } %>>
                            <label for="<%= i %>" class="item"><%= item.task %></label>
                            <input type="hidden" id="ti-id" value="<%= item.id %>">
                            <input type="hidden" id="ti-task" value="<%= item.task %>">
                            <input type="hidden" id="ti-done" value="<%= item.done %>">
                            <input type="datetime-local" id="ti-deadLine" class="input-deadLine" value="<%= deadLine %>" class="item">
                            <a class="delete" data-itemid="<%= item.id %>">
                                <img src="/img/trashcan.svg" alt="delete icon">
                            </a>
                        </li>
                    <% i++;
                        }) %>
                </ul>
            </div>
            <div class="save-todo">
                <button class="btn-save" id="btn-save">Save</button>
            </div>
        </form>
    </div>
    <script src="/js/script.js"></script>
</body>
</html>